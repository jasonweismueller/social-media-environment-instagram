:root{
  --bg:#f0f2f5; --card:#ffffff; --text:#111827; --muted:#6b7280; --line:#e5e7eb;
  --blue:#1877f2; --blue-ink:#0b5cc4; --shadow:0 1px 2px rgba(0,0,0,.06),0 4px 12px rgba(0,0,0,.06);

  /* layout knobs */
  --feed-min: 640px;
  --feed-max: 700px;
  --gap: 16px;
  --rail-gap: 30px;
  --feed-gap: 12px;

  /* menu knobs */
  --menu-font: .85rem;
  --menu-min-w: 320px;
  --menu-max-w: 380px;
  --menu-pad: .28rem;
  --menu-item-vpad: .45rem;
  --menu-item-hpad: .65rem;
  --menu-icon-size: 16px;
  --menu-item-h: 44px;
  --menu-max-items: 7;

  /* video controls */
  --vol-len: 100px;
  --vol-track: 4px;
  --vol-thumb: 6px;
  --vol-pad: 6px;
  --vol-base: rgba(255,255,255,.25);
  --vol-fill: #fff;
  --vol-val: 100;
}

/* ============= Base ============= */
*{box-sizing:border-box}
html,body,#root{height:100%}
html, body { overflow-x: hidden; }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
a{color:var(--blue);text-decoration:none}
a:hover{text-decoration:underline}

/* Top bar (optional legacy nav) */
.nav{position:sticky;top:0;z-index:40;background:rgba(255,255,255,.9);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--line)}
.nav-inner{max-width:960px;margin:0 auto;display:flex;gap:.5rem;align-items:center;padding:.5rem .75rem}

/* Inputs / buttons */
.input,.select{
  border:1px solid var(--line);border-radius:.5rem;padding:.375rem .5rem;font-size:.9rem;background:#fff
}
.select{padding:.35rem .5rem}
.btn{border:1px solid var(--line);border-radius:.5rem;background:#fff;padding:.375rem .6rem;font-size:.9rem;cursor:pointer}
.btn:hover{background:#f9fafb}
.btn.primary{background:var(--blue);border-color:var(--blue);color:#fff}
.btn.primary:hover{background:var(--blue-ink)}

/* Default container */
.container{max-width:700px;margin:0 auto;padding:12px}

/* ============= Cards / Feed ============= */
.card{background:var(--card);border:1px solid var(--line);border-radius:.75rem;box-shadow:var(--shadow);overflow:visible;margin-bottom:1rem}
.card-head{display:flex;gap:.75rem;align-items:center;padding:1rem 1rem .25rem}
.card-body{padding:.25rem 1rem .75rem}

.name{font-weight:600}
.name-row{display:flex;align-items:center;gap:.4rem;flex-wrap:wrap}
.meta { font-size: .75rem; }
.meta .subtle { font-size: inherit; }
.meta .sep { line-height: 1; display: inline-block; transform: translateY(-1px); }

.dots{border:none;background:transparent;padding:.25rem .4rem;border-radius:999px;cursor:pointer;color:#6b7280}
.dots:hover{background:#f3f4f6}

.avatar{width:40px;height:40px;border-radius:999px;background:#e5e7eb;flex:0 0 auto;overflow:hidden}
.avatar-img{width:40px;height:40px;border-radius:999px;object-fit:cover;display:block}

.text{margin:.25rem 0;font-size:15px;line-height:1.5;white-space:pre-wrap}
.image-btn{display:block;width:100%;border:none;background:transparent;padding:0;cursor:pointer}

/* Footer actions */
.footer{padding:.5rem;border-top:1px solid var(--line)}
actions{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem}
.action{display:flex;align-items:center;justify-content:center;gap:.4rem;padding:.5rem;border:1px solid transparent;border-radius:.75rem;cursor:pointer;color:#374151;background:#fff;min-height:38px}
.action:hover{background:#f3f4f6}
.action.active{background:#e7f0ff;color:var(--blue)}
.action svg { display:block; }

/* Submit / misc */
.submit-wrap{text-align:center;margin:.5rem 0 1.5rem}
.btn-wide{display:block;width:100%;max-width:300px;margin:1rem auto}
.end{color:#6b7280;text-align:center;font-size:.9rem;padding:1.5rem}
.link-row{display:flex;flex-wrap:wrap;gap:.75rem;margin-top:.5rem}
.link{font-size:.9rem}

/* Center submit + end inside feed grid (desktop/tablet) */
.ig-feed .submit-wrap,
.page .feed .submit-wrap,
.ig-feed .end,
.page .feed .end{
  grid-column: 1 / -1;
  display:flex;
  justify-content:center;
  text-align:center;
}
.ig-feed .submit-wrap .btn,
.page .feed .submit-wrap .btn{ margin:1rem auto; }

/* Gated blur while overlays shown */
.app-shell{transition:filter .2s ease,opacity .2s ease}
.app-shell.blurred{filter:blur(6px);opacity:.85;pointer-events:none;user-select:none}

/* “See more” clamp (global default) */
.text-wrap{position:relative}
.text.clamp{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.fade-more{position:absolute;right:0;bottom:0;height:1.6em;display:inline-flex;align-items:center;gap:.35ch;background:var(--card);padding-left:.25ch;z-index:1}
.fade-more::before{content:"";position:absolute;right:100%;top:0;width:6ch;height:100%;background:linear-gradient(90deg, rgba(255,255,255,0), var(--card))}
.dots{font:inherit;line-height:inherit;display:inline}

/* Facebook-like "See more" */
.see-more { background:none; border:none; padding:0; display:inline; cursor:pointer; font:inherit; line-height:inherit; color:#111827; font-weight:600; text-decoration:none; }
.see-more:hover { text-decoration:underline; }

/* Badge */
.badge{display:inline-flex;align-items:center}
.badge svg{vertical-align:middle}

/* ============= Dots menu ============= */
.menu-wrap{position:relative;z-index:1}
.menu{
  position:absolute; right:.5rem; top:2.25rem;
  min-width:var(--menu-min-w); max-width:var(--menu-max-w);
  max-height: calc(var(--menu-item-h) * var(--menu-max-items)); overflow-y:auto;
  background:#fff; border:1px solid var(--line); border-radius:.75rem; box-shadow:var(--shadow);
  z-index:9999; padding:var(--menu-pad); animation:menuIn .08s ease-out;
  font-size:var(--menu-font); line-height:1.3; scrollbar-width:thin;
}
.menu::-webkit-scrollbar{width:6px}
.menu::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:4px}
.menu::-webkit-scrollbar-thumb:hover{background:#9ca3af}
.menu-item{
  display:flex; align-items:flex-start; gap:.55rem;
  padding:var(--menu-item-vpad) var(--menu-item-hpad);
  border-radius:.55rem; cursor:pointer; color:#111827; background:transparent; border:none; width:100%; text-align:left;
}
.menu-item:hover{background:#f3f4f6}
.menu-divider{height:1px;background:var(--line);margin:.28rem .1rem}
.menu-item .mi-icon{ width:var(--menu-icon-size);height:var(--menu-icon-size); flex:0 0 var(--menu-icon-size);color:#111827; display:flex;align-items:center; transform: translateY(.5px); }
.menu-item .mi-text{display:flex;flex-direction:column;min-width:0}
.menu-item .mi-title{font-weight:600;font-size:.88rem;line-height:1.15}
.menu-item .mi-sub{font-size:.78rem;color:#6b7280;margin-top:.16rem}
.menu-item.disabled{opacity:.45;cursor:not-allowed;pointer-events:none}
@keyframes menuIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}
.card-head .dots{position:relative;z-index:1001}

/* ============= Info / Note bars ============= */
.info-bar,.note-bar{padding:.5rem 1rem;border-top:1px solid var(--line);font-size:.95rem}
.info-head,.note-head{display:flex;align-items:center;gap:.4rem}
.info-icon{color:#6b7280}
.note-icon{color:#2563eb}
.info-title,.note-title{font-weight:700}
.info-sub{margin-top:.25rem;line-height:1.5;color:#6b7280}
.note-sub{margin-top:.25rem;line-height:1.5}
.info-row,.note-row{margin-top:.35rem;display:flex;align-items:center;gap:.5rem;color:#6b7280}
.info-clean{background:transparent}

/* — Ensure divider above reactions when an intervention is present — */
.info-bar + .bar-stats,
.note-bar + .bar-stats {
  border-top: 1px solid var(--line) !important;
  margin-top: .25rem;
  padding-top: .5rem;
}

/* ============= Reactions summary ============= */
.bar-stats { display:flex; justify-content:space-between; align-items:center; padding:.5rem 1rem; font-size:.9rem; }
.bar-stats .left{display:flex;align-items:center;gap:.5rem;white-space:nowrap}
.muted{color:var(--muted)}
.rx-stack{display:inline-flex;align-items:center}
.rx-stack .rx + .rx { display: none; }
.rx-stack .rx:last-of-type{margin-right:0}
.rx-count{margin-left:9px;line-height:18px;display:inline-block}

/* — Tighten gap when reactions follow text directly (no image) — */
.card-body + .bar-stats { margin-top: -1rem; }

/* Reaction flyout (disabled for IG UI; keep single rule) */
.react-flyout{ display:none !important; }

/* ============= Page layout (3-column + skeleton rails) ============= */
.page{
  display:grid;
  grid-template-columns: minmax(0,1fr) minmax(var(--feed-min), var(--feed-max)) minmax(0,1fr);
  gap: var(--gap);
  width: 100%;
  margin: 0;
  padding-inline: 24px;
  overflow: visible;
  justify-content: center;
  padding-top: var(--feed-gap); /* single source of truth */
}
/* page feed container */
.page .container.feed{
  max-width: var(--feed-max) !important;
  width: 100% !important;
  padding: 0 !important;
  margin: 0 auto !important;
}

.page .feed > .card:first-child{margin-top:var(--feed-gap)}

.rail{
  position: sticky; align-self: start; top: var(--rail-gap);
  height: calc(100vh - var(--rail-gap));
  overflow: hidden; pointer-events: none; user-select: none;
  filter: grayscale(1) blur(1px); opacity:.55; width:100%;
}
/* first child in rail */
.rail > *:first-child{ margin-top:0 !important; }

/* Skeleton UI */
.ghost-card{background:#fff;border:1px solid var(--line);border-radius:1rem;box-shadow:var(--shadow);margin-bottom:12px}
.ghost-card.banner{height:180px}
.ghost-card.box{padding:.75rem}
.ghost-profile{display:flex;align-items:center;gap:.6rem;padding:.6rem .75rem}
.ghost-avatar{width:32px;height:32px;border-radius:999px;background:#e5e7eb;flex:0 0 auto}
.ghost-avatar.sm{width:28px;height:28px}
.ghost-avatar.xl{width:44px;height:44px}
.ghost-avatar.online{position:relative}
.ghost-avatar.online::after{content:"";position:absolute;right:-1px;bottom:-1px;width:8px;height:8px;border:2px solid #fff;border-radius:999px;background:#22c55e}
.ghost-lines{flex:1}
.ghost-line{height:8px;border-radius:4px;margin:.22rem 0;background-image:linear-gradient(90deg,#eef2f7 0%,#f7f9fc 50%,#eef2f7 100%);background-size:220px 100%;animation:ghostShimmer 2.8s ease-in-out infinite}
.ghost-line.w-35{width:35%}.ghost-line.w-40{width:40%}.ghost-line.w-45{width:45%}.ghost-line.w-60{width:60%}.ghost-line.w-70{width:70%}
.ghost-list{background:#fff;border:1px solid var(--line);border-radius:1rem;box-shadow:var(--shadow);padding:.5rem}
.ghost-item{display:flex;align-items:center;gap:.6rem;padding:.45rem .5rem;border-radius:.5rem}
.ghost-item + .ghost-item{margin-top:.1rem}
.ghost-item.icon .ghost-icon{width:28px;height:28px;border-radius:8px;background:#e5e7eb;flex:0 0 auto}
.ghost-title{width:120px;height:10px;border-radius:4px;background:#eef2f7;margin:8px 4px}
.ghost-row{display:flex;align-items:center;gap:.6rem;padding:.35rem 0}
@keyframes ghostShimmer{0%{background-position:-220px 0}100%{background-position:220px 0}}

@media (max-width: 1200px){
  .page{ grid-template-columns: 0 minmax(var(--feed-min), 1fr) minmax(0,1fr); }
  .rail-left{ display:none; }
}
@media (max-width: 1024px){
  .page{ grid-template-columns: minmax(0,1fr); padding-inline: 12px; }
  .rail-right{ display:none; }
  .page .feed{ padding: 12px; }
}

/* ============= Modals / Overlays ============== */
.modal-backdrop{
  position:fixed; inset:0; display:grid; place-items:center; padding:16px; z-index:100;
  background:rgba(0,0,0,0.45);
}
.modal{
  background:#fff;border-radius:1rem;box-shadow:var(--shadow);
  width:calc(100vw - 48px);max-width:680px;max-height:90vh;
  display:flex;flex-direction:column;overflow:hidden;
}
.modal.modal-wide{max-width:1120px;width:calc(100vw - 64px)}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border-bottom:1px solid var(--line)}
.modal-body{flex:1 1 auto;padding:1rem;overflow:auto;-webkit-overflow-scrolling:touch}
.modal-footer{padding:10px 16px;border-top:1px solid var(--line);background:#fff;display:flex;gap:.5rem;justify-content:flex-end}
.textarea{width:100%;border:1px solid var(--line);border-radius:.75rem;padding:.75rem;font-size:1rem;outline:none}
.textarea:focus{border-color:var(--blue);box-shadow:0 0 0 3px rgba(24,119,242,.15)}
.modal.modal-compact{max-width:460px;width:calc(100vw - 56px);text-align:center;padding:32px 28px}

.spinner-ring{
  width:42px;height:42px;margin:0 auto 14px;border-radius:50%;
  border:3px solid #e5e7eb;border-top-color:#3b82f6; animation:spin .9s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Report acknowledgment overlay */
.ack-overlay{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:2000; pointer-events:none; animation: ackInOut 2.8s ease forwards; }
.ack-overlay-box{ pointer-events:auto; background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow:var(--shadow); padding:20px 24px; min-width:360px; max-width:480px; display:flex; align-items:center; gap:12px; text-align:left; }
.ack-check{ width:28px;height:28px;border-radius:999px;display:grid;place-items:center;background:#16a34a;color:#fff;font-weight:700;flex:0 0 auto; }
.ack-text{ color:#111827; font-size:.98rem; line-height:1.35; }
@keyframes ackInOut{
  0%{opacity:0;transform:translateY(8px)}
  12%{opacity:1;transform:translateY(0)}
  82%{opacity:1;transform:translateY(0)}
  100%{opacity:0;transform:translateY(-6px)}
}

/* Toast */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:#000;color:#fff;padding:.5rem .75rem;border-radius:.5rem;font-size:.85rem;box-shadow:var(--shadow)}

/* --- Admin & forms polish --- */
.subtle { color: #6b7280; font-size: .9rem; }
.btn.ghost.active { border-color: var(--line); background: rgba(37, 99, 235, .06); }
.card h3 { font-weight: 700; font-size: 1.15rem; }

.admin-shell{width:100%;max-width:1440px;margin:0 auto;padding:16px}
@media (min-width:1536px){ .admin-shell{ max-width:1600px } }
.admin-shell .card{width:100%}

.admin-grid{grid-template-columns:minmax(0,1fr)}
@media (min-width:1024px){
  .admin-grid{grid-template-columns:1fr 1fr; align-items:start}
}

/* Editor panels */
.editor-grid { display:grid; gap:16px; grid-template-columns: 1fr 480px; }
@media (max-width: 980px) { .editor-grid { grid-template-columns: 1fr; } }
.editor-form { display:grid; gap:.75rem; }
.section-title { margin:.25rem 0; font-size:.95rem; font-weight:700; color:#374151; }
.fieldset { border:1px solid var(--line); border-radius:.5rem; padding:.75rem; display:grid; gap:.75rem; }
.grid-2 { display:grid; gap:.5rem; grid-template-columns: 1fr 1fr; }
.grid-3 { display:grid; gap:.5rem; grid-template-columns: repeat(3, 1fr); }
@media (max-width:640px){ .grid-2, .grid-3 { grid-template-columns:1fr; } }
.avatar-preview { display:flex; align-items:center; justify-content:flex-end; }

/* Reaction pills (admin) */
.rx-pills { display:flex; flex-wrap:wrap; gap:.5rem; }
.pill { display:inline-flex; align-items:center; gap:.35rem; border:1px solid var(--line); border-radius:.5rem; padding:.25rem .55rem; cursor:pointer; user-select:none; }
.pill input { display:none; }
.pill .emoji { font-size:1rem; }
.pill.active { background:#f3f4f6; border-color:#e5e7eb; }

/* Admin preview */
.editor-preview { position:sticky; top:16px; align-self:start; overflow:hidden }
.preview-head { font-size:.85rem; color:#6b7280; margin-bottom:.5rem; padding-left:.25rem; }
.editor-preview .card { box-shadow:none; border:1px solid var(--line); }
.preview-zoom { transform: scale(.9); transform-origin: top left; }

/* FAB */
.admin-fab-wrap { position:fixed; bottom:12px; right:12px; z-index:2000; pointer-events:none; }
.admin-fab-wrap .btn.admin-fab { pointer-events:auto; }
.btn.admin-fab {
  position:relative; width:40px; height:40px; border-radius:999px; border:0; background:transparent; color:#6b7280;
  display:flex; align-items:center; justify-content:center; font-size:1.1rem; opacity:.06; transition:opacity .25s, transform .25s, box-shadow .25s;
}
.btn.admin-fab::before{
  content:""; position:absolute; inset:0; border-radius:inherit; background:rgba(255,255,255,.35);
  box-shadow:0 0 0 1px rgba(17,24,39,.08), inset 0 0 0 1px rgba(255,255,255,.25);
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); opacity:.18; transition:opacity .25s, box-shadow .25s; z-index:-1;
}
.btn.admin-fab:hover,.btn.admin-fab:focus-visible{ opacity:1; transform:scale(1.05); }
.btn.admin-fab:hover::before,.btn.admin-fab:focus-visible::before{ background:#fff; opacity:1; box-shadow:0 0 0 1px var(--line), 0 6px 18px rgba(0,0,0,.08); }

/* Inputs with inline icon */
.input-wrap { position:relative; display:flex; align-items:center; }
.input-wrap .input { width:100%; padding-right:2.5rem; }
.input-icon-btn { position:absolute; right:.5rem; top:50%; transform:translateY(-50%); padding:.25rem; background:none; border:none; cursor:pointer; color:#6b7280; transition:color .2s ease; }
.input-icon-btn:hover { color:#111827; }

/* Hoverable metrics tooltip */
.metric.hoverable { position:relative; }
.names-tooltip {
  position:absolute; z-index:10000; top:calc(100% + 6px); left:0; min-width:220px; max-width:280px;
  background:#fff; border:1px solid var(--line); border-radius:10px; padding:.6rem .7rem; box-shadow:0 6px 24px rgba(0,0,0,.08);
}
.names-title { font-weight:600; font-size:.9rem; margin-bottom:.35rem; color:#111827; }
.names-list { margin:0; padding-left:1rem; line-height:1.35; color:#374151; }
.names-list li { margin:0; }
.names-more, .names-empty { margin-top:.3rem; color:#6b7280; font-size:.9rem; }
.hoverable-metric{ cursor:pointer; }
.hoverable-metric[aria-expanded="true"]{ cursor:default; text-decoration:underline; }

/* ===== Placeholder top rail (aligned to page grid) ===== */
.top-rail-placeholder{
  position: sticky; top: 0; z-index: 100; background:#fff; border-bottom:1px solid var(--line);
}
.top-rail-placeholder .trp-inner{
  width: 100%; display:grid;
  grid-template-columns: minmax(0,1fr) minmax(var(--feed-min), var(--feed-max)) minmax(0,1fr);
  align-items:center; height:52px; padding: 0 24px;
}
.trp-left{ grid-column:1; justify-self:start; display:flex; align-items:center; gap:12px; }
.trp-center{ grid-column:2; justify-self:center; display:flex; gap:24px; }
.trp-right{ grid-column:3; justify-self:end; display:flex; align-items:center; gap:10px; }
.trp-logo{ width:32px; height:32px; border-radius:999px; background:#e5e7eb; }
.trp-search{ width:160px; height:28px; border-radius:999px; background:#f0f2f5; }
.trp-tab{ width:40px; height:28px; border-radius:6px; background:#f3f4f6; }
.trp-btn{ width:32px; height:32px; border-radius:999px; background:#e5e7eb; }
.trp-avatar{ width:32px; height:32px; border-radius:999px; background:#d1d5db; }

/* FEED vs ADMIN top bars */
body.admin-mode .top-rail-placeholder { display: none !important; }
body.admin-mode .nav { display: block !important; }
body:not(.admin-mode) .nav { display: none !important; }
body:not(.admin-mode) .top-rail-placeholder { display: grid !important; }

/* ================== Admin Login ================== */
.admin-login-wrap {
  min-height: 100vh; display:grid; place-items:center; padding:16px;
  background:
    radial-gradient(1200px 600px at 10% -20%, rgba(37, 99, 235, 0.10), transparent 60%),
    radial-gradient(1200px 600px at 110% 120%, rgba(16, 185, 129, 0.10), transparent 60%),
    linear-gradient(#f8fafc, #f3f4f6);
}
.admin-login-wrap .card.admin-login-card {
  width:min(420px,92vw); padding:16px 20px; border-radius:16px; border:1px solid var(--line);
  background:#fff; box-shadow:0 10px 30px rgba(2, 6, 23, 0.08);
}
.admin-login-wrap .card.admin-login-card h2 { font-size:1.25rem; font-weight:700; }
.admin-login-wrap .card.admin-login-card .subtle { font-size:.95rem; color:#6b7280; }
.admin-login-wrap .card.admin-login-card label { font-weight:600; display:grid; gap:.6rem; margin-top:1rem; }
.input-with-toggle{ position:relative; }
.input-with-toggle .input{ width:100%; padding-right:2.25rem; }
.eye-btn{ position:absolute; right:8px; top:50%; transform:translateY(-50%); border:0; background:transparent; padding:4px; line-height:0; color:#6b7280; cursor:pointer; transition:color .2s; }
.eye-btn:hover{ color:#374151; }
.admin-login-wrap .card.admin-login-card .error,
.admin-login-wrap .card.admin-login-card [style*="color: crimson"] {
  background:#fef2f2; color:#991b1b !important; border:1px solid #fecaca; border-radius:8px; padding:.5rem .6rem; font-size:.9rem;
}
.admin-login-wrap .card.admin-login-card .btn.primary { width:100%; margin-top:1rem; }
body:has(.admin-login-wrap) .top-rail-placeholder { display:none !important; }
body:has(.admin-login-wrap) .nav { display:block !important; }

/* ============ Video (single, modern set) ============ */
.video-wrap {
  position: relative; width: 100%; background:#000; overflow:hidden; border-radius:8px;
  aspect-ratio: 16 / 9; max-height: min(60vh, 520px);
}
.video-el { position:absolute; inset:0; width:100%; height:100%; object-fit:contain; background:#000; }
.video-wrap.drive-embed iframe { position:absolute; inset:0; width:100%; height:100%; border:0; display:block; background:#000; }
.video-center-btn {
  position:absolute; inset:0; margin:auto; width:66px; height:66px; border-radius:999px; border:none;
  background:rgba(0,0,0,.55); color:#fff; font-size:28px; line-height:1; display:grid; place-items:center; cursor:pointer;
  transition: transform .08s, background .12s; z-index:2;
}
.video-center-btn:hover { background:rgba(0,0,0,.7); transform:scale(1.03); }
.video-center-btn:active { transform:scale(0.98); }
.video-mute-btn { position:absolute; left:8px; bottom:8px; padding:6px 10px; border-radius:999px; border:none; background:rgba(0,0,0,.55); color:#fff; font-size:14px; cursor:pointer; z-index:2; }
.video-mute-btn:hover { background:rgba(0,0,0,.7); }

/* FB-like control bar */
.fb-controls{
  position:absolute; left:0; right:0; bottom:0; height:40px; display:flex; align-items:center; gap:6px; padding:0 8px;
  background: linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0)); opacity:0; transition: opacity .15s; pointer-events:none;
}
.video-wrap:hover .fb-controls{ opacity:1; pointer-events:auto; }
.fb-btn { background:none; box-shadow:none; border:none; color:white; padding:4px; border-radius:0; }
.fb-btn:hover { background: rgba(255,255,255,0.1); }
.fb-spacer{ flex:1; }

.fb-settings{ position:relative; }
.fb-settings-menu{
  position:absolute; bottom:36px; right:0; background:#111827; color:#fff; border:1px solid rgba(255,255,255,.08);
  border-radius:8px; padding:6px; box-shadow:0 8px 28px rgba(0,0,0,.25); min-width:120px; z-index:5;
}
.fb-settings-item{ width:100%; text-align:left; border:0; background:transparent; color:#fff; padding:6px 8px; border-radius:6px; cursor:pointer; font-size:13px; }
.fb-settings-item:hover{ background: rgba(255,255,255,.08); }
.fb-settings-item.active{ background: rgba(255,255,255,.16); }

.fb-vol { position: relative; pointer-events:auto; }
.fb-vol > button { position: relative; z-index: 10; }
.fb-vol-pop{
  position:absolute; bottom: calc(100% + 10px); left:50%; transform: translateX(-50%);
  background: transparent; border:0; padding:0; box-shadow:none; z-index:9; pointer-events:auto;
  opacity:1; transition: opacity .12s, transform .12s;
}
.fb-vol-pop.hide{ opacity:0; transform:translateX(-50%) translateY(6px) scale(.98); pointer-events:none; }
.fb-vol-box{ position:relative; width:28px; height: calc(var(--vol-len) + var(--vol-pad) * 2); display:grid; place-items:center; }
.fb-vol-visual{
  position:absolute; top:var(--vol-pad); bottom:var(--vol-pad); left:50%; margin-left: calc(var(--vol-track) / -2);
  width:var(--vol-track); padding:2px; border-radius:999px; background:var(--vol-base); overflow:hidden; pointer-events:none;
}
.fb-vol-visual::after{
  content:""; position:absolute; left:2px; right:2px; bottom:2px; height: calc(var(--vol-val) * 1%);
  background:var(--vol-fill); border-radius:999px; will-change: height;
}
.fb-vol-slider{
  position:relative; z-index:1; -webkit-appearance: slider-vertical !important; appearance:none;
  width:28px; height:var(--vol-len); background:transparent; padding:0; border:0; outline:none; cursor:pointer; accent-color:transparent; touch-action:none; -webkit-tap-highlight-color:transparent;
}
.fb-vol-slider::-webkit-slider-runnable-track{ background:transparent; border:0; height:100%; }
.fb-vol-slider::-moz-range-track{ background:transparent; border:0; }
.fb-vol-slider::-moz-range-progress{ background:transparent !important; }
.fb-vol-slider::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none; width:var(--vol-thumb); height:var(--vol-thumb); border-radius:50%; background:#fff; border:0; box-shadow:0 2px 10px rgba(0,0,0,.25); margin:0;
}
.fb-vol-slider::-moz-range-thumb{
  width:var(--vol-thumb); height:var(--vol-thumb); border-radius:50%; background:#fff; border:0; box-shadow:0 2px 10px rgba(0,0,0,.25); margin:0;
}
@supports not (-webkit-appearance: slider-vertical) {
  .fb-vol-slider{ -webkit-appearance:none; appearance:none; width: calc(var(--vol-len) + var(--vol-thumb)); height:28px; transform: rotate(-90deg); transform-origin:center; background:transparent; }
}
.fb-vol-slider:focus-visible{ outline:2px solid rgba(255,255,255,.6); outline-offset:2px; }

/* ---------------- Instagram skeleton (for <SkeletonFeed/>) ---------------- */
.ig-page { max-width: var(--feed-max); margin: 0 auto; padding: 12px; }
.ig-stories { display: flex; gap: 12px; padding: 8px 4px; }
.ig-story { width: 72px; display: flex; flex-direction: column; align-items: center; gap: 6px; }
.ghost-story-ring { width: 56px; height: 56px; border-radius: 50%; padding: 3px; background: linear-gradient(135deg,#f3f4f6,#e5e7eb); }
.ghost-story-avatar { width: 100%; height: 100%; border-radius: 50%; background: #e5e7eb; }
.ig-feed { display: grid; gap: 16px; }
.ig-card { border: 1px solid var(--line); border-radius: 12px; background: #fff; padding: 10px; }
.ig-card-head { display: flex; align-items: center; gap: 10px; }
.ghost-media { width: 100%; padding-top: 100%; background: #e5e7eb; border-radius: 8px; }
.ig-actions { display: flex; align-items: center; gap: 12px; padding-top: 8px; }
.ghost-icon { width: 24px; height: 24px; background: #e5e7eb; border-radius: 6px; }
.ghost-line { height: 8px; border-radius: 4px; margin: .22rem 0; background-image: linear-gradient(90deg,#eef2f7 0%,#f7f9fc 50%,#eef2f7 100%); background-size: 220px 100%; animation: ghostShimmer 2.8s ease-in-out infinite; }
.ghost-line.w-40 { width: 40%; } .ghost-line.w-25 { width: 25%; }
.ghost-line.w-70 { width: 70%; } .ghost-line.w-55 { width: 55%; }

/* ---------------- IG reactions accents ------------------ */
.action[data-action="like"].active,
.action.btn-like.active { color: #ed4956; background: #ffe8ec; }

/* ========================
   FEED TOP PLACEHOLDER BAR (IG-like)
   ======================== */
.ig-topbar{
  position: sticky; top: 0; z-index: 100; background:#fff; border-bottom:1px solid var(--line);
}
.ig-top-inner{
  display:grid; grid-template-columns: minmax(0,1fr) minmax(var(--feed-min), var(--feed-max)) minmax(0,1fr);
  align-items:center; height:52px; padding: 0 24px;
}
.ig-left{ grid-column:1; display:flex; align-items:center; gap:10px; }
.ig-right{ grid-column:3; display:flex; align-items:center; gap:10px; justify-content:flex-end; }
.ig-wordmark{ width:120px; height:16px; border-radius:6px; background:#f3f4f6; }
.ig-topbar .ig-right svg { display:none !important; }
body.admin-mode .ig-topbar { display:none !important; }

/* ===================== */
/* IG FEED — MOBILE (consolidated, minimal) */
/* ===================== */
@media (max-width: 700px){
  :root{
    --feed-min: 0px !important;
    --feed-gap: 0px !important;
  }

  html, body{
    overflow-x: hidden !important;
    font-size: 16px; /* prevent zoomed-in scaling */
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  html::-webkit-scrollbar, body::-webkit-scrollbar{ display: none; }

  /* one-column layout; no side padding; hide desktop rails */
  .page{
    grid-template-columns: 1fr !important;
    padding-inline: 0 !important;
    justify-content: stretch !important;
    justify-items: stretch !important;
  }
  .rail, .rail-left, .rail-right{ display: none !important; }

  /* keep placeholder desktop top rail hidden on mobile,
     but allow IG top bar (if you render it) */
  .top-rail-placeholder{ display: none !important; }
  body:not(.admin-mode) .ig-topbar{ display: block !important; }

  /* feed spans container width (avoid 100vw overshoot) */
  .feed-wrap{ width:100% !important; }
  .page .feed,
  .insta-feed{
    width:100% !important;
    max-width:100% !important;
    margin:0 !important;
    padding:0 0 16px 0 !important;
    gap:12px !important;
  }

  /* cards flush to edges */
  .insta-card{
    border:none !important;
    border-radius:0 !important;
    box-shadow:none !important;
    margin:0 !important;
    background:#fff !important;
  }

  /* ensure the mobile stories strip is visible */
  .ig-stories-bar{ display:block !important; visibility:visible !important; }

  /* show end/submit blocks on mobile */
  .feed-end, .feed-submit, .submit-wrap, .end{
    display:block !important;
    text-align:center;
    padding:12px 16px;
  }
}

/* Desktop/tablet keep centered feed... */
@media (min-width: 701px){
  .insta-feed{
    width:100%;
    max-width:470px;
    margin:0 auto !important;
    display:grid;
    gap:16px;
    padding:12px 12px 24px;
  }
}

/* IG stories bar — no scroll, fits exactly N items computed in JS */
@media (max-width:700px){
  .ig-stories-bar.noscroll{
    background:#fff;
    border-bottom:1px solid var(--line);
    padding:8px 12px 10px;   /* <= 12px must match sidePad in JS */
    margin:0;
  }
  .ig-stories-row{
    display:flex;
    justify-content:space-between; /* spreads the N items evenly */
    align-items:flex-start;
    gap:10px;                      /* minimum visual gap, not used for fit math */
    overflow:hidden;               /* ensure no accidental scrollbars */
  }
  .ig-story-ghost{
    flex:0 0 72px;                 /* <= must match itemW in JS */
    width:72px;
    display:flex; flex-direction:column; align-items:center; gap:6px;
  }
  .ig-story-ring{
    width:58px; height:58px; border-radius:999px; padding:3px;
    background: conic-gradient(#feda75,#fa7e1e,#d62976,#962fbf,#4f5bd5,#feda75);
    display:grid; place-items:center;
  }
  .ig-story-avatar{ width:100%; height:100%; border-radius:999px; background:#e5e7eb; }
  .ig-story-name{ width:48px; height:9px; border-radius:4px; background:#f0f2f5; }
}

/* ---------------- IG Carousel ---------------- */
.igcar-wrap{
  position:relative; width:100%; border-radius:8px; overflow:hidden; background:#000;
  aspect-ratio: 1 / 1;
  touch-action: pan-x;
  overscroll-behavior: contain;
  user-select: none;
}
.igcar-track{ display:flex; width:100%; height:100%; transition: transform .22s ease-in-out; will-change: transform; }
.igcar-slide{ flex:0 0 100%; height:100%; position:relative; }
.igcar-img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; -webkit-user-drag: none; user-drag: none; }
.igcar-arrow{ position:absolute; top:50%; transform: translateY(-50%); width:32px; height:32px; border-radius:999px; border:none; background:rgba(0,0,0,.45); cursor:pointer; z-index:3; }
.igcar-arrow.left{ left:8px; }
.igcar-arrow.right{ right:8px; }
.igcar-arrow:hover{ background:rgba(0,0,0,.65); }
@media (max-width:700px){ .igcar-arrow{ display:none !important; } }
.igcar-dots{ position:absolute; left:0; right:0; bottom:8px; display:flex; gap:6px; justify-content:center; z-index:3; }
.igcar-dots .dot{ width:6px; height:6px; border-radius:999px; border:0; padding:0; background:rgba(255,255,255,.5); cursor:pointer; }
.igcar-dots .dot.on{ background:#fff; }
.igcar-count{
  position:absolute; top:8px; right:8px; padding:4px 8px; border-radius:999px; font-size:12px; font-weight:600; line-height:1;
  color:#fff; background:rgba(0,0,0,.55); backdrop-filter: blur(2px); box-shadow: 0 2px 10px rgba(0,0,0,.25); z-index:3; display:none;
}
@media (max-width:700px){ .igcar-count{ display:inline-block; } }


/* ===== IG caption: inline with username, clamp only when truly overflowing ===== */
.ig-caption-row{
  padding: 6px 12px 0 12px;
  font-size:14px;
  line-height:1.4;
  color:#111827;
}

.ig-caption-row .ig-username{
  display:inline;
  font-weight:600;
  white-space:nowrap;
  margin-right:.5ch;
}

/* PostText wrapper stays inline so its right edge hugs the last characters */
.ig-caption-row .text-wrap{
  display:inline;
  position:relative;              /* anchor for fade-more */
  vertical-align:baseline;
  max-width:100%;
}

/* Caption text */
.ig-caption-row .text{
  display:inline;
  margin:0;
  white-space:pre-wrap;
}

/* INLINE clamp (so it can start on same line as username) */
.ig-caption-row .text.clamp {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  padding-right: 2.75ch; /* reserve space for “more” */
}

/* Only add the reserve space when overflow is REAL */
.ig-caption-row .text.clamp.needs{
  padding-right: 2.75ch;
}

/* Fade + "more" cluster sits snug to the end of the inline wrapper */
.ig-caption-row .fade-more{
  position:absolute;
  right:0;
  bottom:0;
  height:1.4em;
  display:inline-flex;
  align-items:center;
  gap:.35ch;
  background:var(--card);
  padding-left:.25ch;
  z-index:1;
}
.ig-caption-row .fade-more::before{
  content:"";
  position:absolute;
  right:100%;
  top:0;
  width:4.5ch;
  height:100%;
  background:linear-gradient(90deg, rgba(255,255,255,0), var(--card));
}

/* Avoid duplicate ellipsis look if your component also renders dots */
.ig-caption-row .fade-more .dots{ display:none !important; }

/* Mobile: slightly more pad so "more" never wraps */
@media (max-width:700px){
  .ig-caption-row .text.clamp.needs{ padding-right:3.25ch; }
}